<!--
  Verify that a map is created when a set of fiducual transforms is sent to
  fiducial_slam
-->
<launch>
  <node type="fiducial_slam" pkg="fiducial_slam2" name="fiducial_slam">
    <param name="initial_map_file" value="$(find fiducial_slam2)/test/111_initial_map.txt" />
    <param name="map_file" value="$(find fiducial_slam2)/test/map.txt" />
    <param name="camera_frame" value="base_link" />
    <param name="odom_frame" value="" />
    <param name="pose_frame" value="base_link" />
    <param name="do_rotation" value="true" />
  </node>

  <node name="rosbag" pkg="rosbag" type="play" args="-l $(find fiducial_slam2)/test/aruco_transforms.bag">
  </node>

  <test test-name="map_test2" pkg="fiducial_slam2" type="map_test.py" name="map_test">
    <param name="map_file" value="$(find fiducial_slam2)/test/map.txt" />
    <param name="min_lines" value="3" />
  </test>
</launch>

